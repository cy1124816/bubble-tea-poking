# 📸 OCR 功能说明

## 🎯 功能介绍

奶茶戳戳现在支持拍照识别奶茶标签，自动填充表单信息！

## 🔧 技术方案

### 双引擎识别策略

1. **百度 OCR（高精度版）** ⭐ 推荐
   - 识别率：95%+
   - 适合场景：复杂背景、倾斜文字、光线不佳
   - 免费额度：每天 500 次
   - 需要配置：需要在 Vercel 配置 API Key

2. **Tesseract.js（离线识别）** 🔒 备选
   - 识别率：60-80%
   - 适合场景：简单背景、正面拍摄、光线充足
   - 完全免费：无次数限制
   - 隐私保护：完全离线运行

### 识别流程

```
用户拍照
    ↓
优先使用百度 OCR
    ↓
识别成功？ ——是→ 返回结果
    ↓ 否
降级到 Tesseract.js
    ↓
返回结果
```

## 📦 部署选项

### 选项 1：Vercel 部署（推荐）

**优势：**
- ✅ 支持百度 OCR 高精度识别
- ✅ Serverless 函数自动处理 API 调用
- ✅ 环境变量保护 API Key
- ✅ 国内可访问，无需 VPN
- ✅ 完全免费

**部署步骤：**
详见 `BAIDU_OCR_SETUP.md`

### 选项 2：GitHub Pages 部署（当前）

**特点：**
- ⚠️ 只能使用 Tesseract.js 离线识别
- ⚠️ 识别精度较低（60-80%）
- ✅ 配置简单，无需 API Key
- ✅ 完全免费

## 🚀 快速开始

### 如果你想使用高精度识别（推荐）

1. 阅读 `BAIDU_OCR_SETUP.md`
2. 申请百度 OCR API Key（5 分钟）
3. 部署到 Vercel（5 分钟）
4. 配置环境变量（1 分钟）

总共耗时约 10-15 分钟，一劳永逸。

### 如果你想继续使用当前方案

无需任何操作，当前已集成 Tesseract.js 离线识别。

但请注意：
- 拍照时尽量正面拍摄
- 确保光线充足
- 标签文字清晰完整
- 避免复杂背景

## 📊 识别效果对比

| 场景 | 百度 OCR | Tesseract.js |
|------|----------|--------------|
| 简单标签，正面拍摄 | ⭐⭐⭐⭐⭐ 95%+ | ⭐⭐⭐⭐ 80%+ |
| 倾斜拍摄 | ⭐⭐⭐⭐⭐ 90%+ | ⭐⭐ 40%+ |
| 复杂背景 | ⭐⭐⭐⭐ 85%+ | ⭐ 20%+ |
| 光线不足 | ⭐⭐⭐⭐ 80%+ | ⭐ 30%+ |
| 手写文字 | ⭐⭐⭐ 70%+ | ❌ 10%- |

## 🎮 使用技巧

### 拍照技巧

1. **距离适中**：标签占画面的 50-80%
2. **正面拍摄**：避免过大的倾斜角度
3. **光线充足**：自然光最佳，避免强光直射
4. **背景简洁**：将标签对准，避免太多杂物
5. **清晰对焦**：确保文字清晰，不模糊

### 识别不准确怎么办？

1. 查看控制台日志，确认使用的识别引擎
2. 如果使用 Tesseract.js，考虑：
   - 重新拍照，改善光线和角度
   - 或升级到百度 OCR
3. 手动修正识别结果
4. 提供反馈，帮助改进算法

## 🔍 调试信息

打开浏览器控制台（F12），可以看到：
- 使用的识别引擎（百度 OCR 或 Tesseract.js）
- 识别到的原始文字
- 解析出的结构化数据
- 每个字段的匹配过程

## 📝 已识别字段

目前支持自动识别：
- ✅ 品牌（15+ 主流品牌）
- ✅ 奶茶名称（智能提取）
- ✅ 糖度（正常糖、少糖、半糖、微糖、无糖）
- ✅ 冰度（正常冰、少冰、去冰、温、热）
- ✅ 价格（自动解析 ¥ 符号和数字）

暂不支持：
- ❌ 小料/配料（需要手动添加）
- ❌ 评分（需要手动打分）
- ❌ 评价（需要手动填写）

## 🎉 总结

- **追求高识别率**：使用 Vercel + 百度 OCR
- **追求简单快速**：继续使用 GitHub Pages + Tesseract.js
- **两者兼顾**：当前代码已实现自动降级策略

选择权在你手中！🎈
